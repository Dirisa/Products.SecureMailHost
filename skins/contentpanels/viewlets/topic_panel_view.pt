<metal:block tal:define="results python:here.queryCatalog()[:5];
                    results python:[item.getObject() for item in results]">

<metal:block metal:define-macro="content_listing">
  <div class="portletContent odd" 
       tal:repeat="item results"
       tal:attributes="class python:test(repeat['item'].index % 2, 'portletContent even', 'portletContent odd')">
    <tal:block tal:condition="python:item != None and item.getTypeInfo()">
        <span tal:define="action python:item.getTypeInfo().getActionById('view');
                        url python:item.absolute_url()+'/'+action;
                        ">
           &nbsp;
                      <a href="#"
		            i18n:attributes="title"
                            tal:attributes="href url;
                                            title python:item.Description() or  None;">
                <img src="#" tal:attributes="src string:${here/portal_url}/${item/getIcon}" />
                <tal:block tal:condition="python:here.portal_discussion.isDiscussionAllowedFor(item)" >
                   <span tal:omit-tag=""
                      tal:define="replyCount python:here.portal_discussion.getDiscussionFor(item).replyCount(item)"
                      tal:condition="python: replyCount > 0"
                      tal:replace="python: '[%d]'% replyCount"> 8
                    </span>
               </tal:block>
 
                        <span tal:replace="python:item.Title() or item.getId()">Title</span>
            </a>
      </span>

      <span tal:content="string: (${item/Creator})">creator</span>
      <span tal:content="python:here.toPortalTime(item.ModificationDate())">
                        08/19/2001 03:01 AM
      </span>
    </tal:block>
  </div>
</metal:block>
</metal:block>

<div>
   <a style="float:right" tal:attributes="href here/absolute_url" i18n:translate="read_more" i18n:domain="plone">More...</a>
</div>


