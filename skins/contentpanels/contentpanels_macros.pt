<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US" lang="en-US"
      i18n:domain="plone">

<body>

<metal:block metal:define-macro="cpPages"
     tal:omit-tag=""
     tal:define="page_titles here/getPageTitles;">

<div tal:condition="python: len(page_titles) > 1"
     style="text-align:right">
    <tal:pages repeat="pageTitle page_titles">

    <a style="border-bottom: 1px solid;"
       tal:condition="python:pageIndex != repeat['pageTitle'].index"
       tal:attributes="href string:${here/absolute_url}/${template/id}?pageIndex=${repeat/pageTitle/index}"
       tal:content="pageTitle"> page title </a>

    <span tal:condition="python:pageIndex == repeat['pageTitle'].index"
            tal:content="pageTitle"> page title </span>
    </tal:pages>
</div>

</metal:block>


<div metal:define-macro="viewlet"
     tal:omit-tag="">

      <table tal:define="pageIndex pageIndex | python:0"
             tal:attributes="width python: here.getPageInfo(pageIndex, 'pageWidth');
                       cellpadding python: here.getPageInfo(pageIndex, 'pageCellPad');
                       cellspacing python: here.getPageInfo(pageIndex, 'pageCellSpace');
                       align python: here.getPageInfo(pageIndex, 'pageAlign')">
<!--
columns
-->
        <tr>
          <td width="#" valign="top"
              tal:repeat="column python:here.getPageInfo(pageIndex, 'pageColumns')"
              tal:attributes="width python:test(column['columnWidth']=='0', '', column['columnWidth'])" >
            <tal:block tal:define="panels column/columnPanels;
                                   isEmptyColumn python: len(column['columnPanels']) == 0">
              <div tal:repeat="panel panels">
<!--
panel should be here!!
-->
                 <div tal:content="structure python: here.getPanel(panel['panelObjectPath'], panel['panelSkin'], panel['panelObjectViewlet'])"
                      tal:on-error="structure here/contentpanels_error"
                      />

              </div>

            </tal:block>
          </td>
        </tr>
      </table>

</div>


</body>
</html>
