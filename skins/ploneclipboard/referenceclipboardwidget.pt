<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      xmlns:i18n="http://xml.zope.org/namespaces/i18n"
      i18n:domain="ploneclipboard">

    <metal:define define-macro="view">
      <metal:use use-macro="here/widgets/reference/macros/view" />
    </metal:define>

    <metal:define define-macro="edit">
      <metal:use use-macro="here/widgets/field/macros/edit">
        <div metal:fill-slot="widget_body"
             tal:define="fieldname field/getName;
                         titles python:widget.getTitles(here, field);
                         clipboards python:here.ploneclipboard_tool.getClipboards()">

          <div tal:define="titles python:widget.getTitles(here, field)"
               tal:condition="titles">
            <ul>
              <li tal:repeat="title titles"
                  tal:content="title">Target Title</li>
            </ul>
          </div>

          <div>
            <input type="radio"
                   value="__CLEAR__"
                   tal:attributes="name string:${fieldname}_clipboard" />
            <span i18n:translate="label_clear_or_add_from">
              Clear - or add from
            </span>

            <tal:repeat repeat="cb clipboards">
              <input type="radio"
                     tal:condition="cb/objectIds"
                     tal:attributes="name string:${fieldname}_clipboard;
                                     value cb/getId" />
              <span tal:condition="cb/objectIds"
	            tal:content="cb/title_or_id" />
            </tal:repeat>
	    
	    <tal:if tal:condition="clipboards">
	      <input type="radio"
		     value="__CB__"
		     tal:define="cb python:clipboards[0]"
		     tal:condition="cb/isCopyBufferPasteable"
		     tal:attributes="name string:${fieldname}_clipboard;" />
              <span i18n:translate="label_copy_buffer">
		Copy buffer
	      </span>
	    </tal:if>
          </div>

          <div>
            <input type="checkbox"
                   value="1"
                   tal:attributes="name string:${fieldname}_replace" />
            <span i18n:translate="label_replace">Replace</span>
          </div>

        </div>
      </metal:use>
    </metal:define>

</html>