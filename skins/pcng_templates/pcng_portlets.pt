<metal:div metal:define-macro="pcng_collector_portlets"
           tal:define="portlets here/getUsed_portlets">
  <tal:if tal:condition="python: here.meta_type == 'PloneCollectorNG'" >
    <div metal:use-macro="here/pcng_portlet_macros/macros/pcng_collector_portlet" />

    <tal:if tal:condition="python: 'search' in portlets">
      <div metal:use-macro="here/pcng_portlet_macros/macros/pcng_search_portlet" />
    </tal:if>

  </tal:if>
</metal:div>

<metal:div metal:define-macro="pcng_issue_portlets"
           tal:define="portlets here/getUsed_portlets">
  <tal:if tal:condition="python: here.meta_type == 'PloneIssueNG'" >

    <div metal:use-macro="here/pcng_portlet_macros/macros/pcng_issue_portlet" />

    <tal:if tal:condition="python: 'uploads' in portlets">
      <div metal:use-macro="here/pcng_portlet_macros/macros/pcng_issue_uploads" />
    </tal:if>
    <tal:if tal:condition="python: 'references' in portlets">
      <div metal:use-macro="here/pcng_portlet_macros/macros/pcng_issue_references" />
    </tal:if>
    <tal:if tal:condition="python: 'search' in portlets">
      <div metal:use-macro="here/pcng_portlet_macros/macros/pcng_search_portlet" />
    </tal:if>
    <tal:if tal:condition="python: 'searchresults' in portlets">
      <div metal:use-macro="here/pcng_portlet_macros/macros/pcng_searchresults" />
    </tal:if>

  </tal:if>
</metal:div>
