<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      lang="en"
      metal:use-macro="here/prefs_main_template/macros/master"
      i18n:domain="plone">

<metal:block fill-slot="top_slot"
             tal:define="dummy python:request.set('disable_border',1)" />

<body>

<div metal:fill-slot="prefs_configlet_main">

    <span tal:define="dummy python:request.response.setHeader('pragma','no-cache')" />

    <h1 i18n:translate="heading_my_preferences">PloneCollectorNG Member Preferences</h1>

    <a href=""
       class="link-parent"
       tal:attributes="href string: $portal_url/plone_memberprefs_panel"
       i18n:translate="label_up_to_preferences">
    Up to My Preferences
    </a>

    <p i18n:translate="description_my_preferences">
    Your personal PloneCollector settings.
    </p>
      <form method="post" action="pcng_set_member_preferences">

        <fieldset>

            <legend i18n:translate="legend_member_details">Member Details</legend>


        <metal:block tal:repeat="item python: ( 
                                         ('fullname','Name'), 
                                         ('pcng_company','Company'), 
                                         ('pcng_position','Position'), 
                                         ('pcng_address','Address'),
                                         ('pcng_city','City'),
                                         ('pcng_phone','Phone'),
                                         ('pcng_fax','Fax'),
                                         )">   
          <div class="field">
            <label i18n:translate="" tal:content="python: item[1]" />
            <div class="row">
              <input type="text" tal:attributes="value python: member.getProperty(item[0]); name python: item[0]">
            </div>
          </div>
        </metal:block>

        <div class="field">
          <label i18n:translate="send_emails" >Send notification emails</label>
          <div class="field">
            <select name="pcng_send_emails">
              <option tal:repeat="item python: (('no', 'No'), ('yes', 'Yes'))"
                      tal:content="python: item[1]"
                      i18n:translate=""
                      tal:attributes="value python: item[0];
                                      selected python: member.getProperty('pcng_send_emails') == item[0]"
              />
            </select>
          </div>
        </div>

        <div class="field">
          <label i18n:translate="send_attachments" >Send attachments within notification emails</label>
          <div class="row">
            <select name="pcng_send_attachments">
              <option tal:repeat="item python: (('no', 'No'), ('yes', 'Yes'))"
                      tal:content="python: item[1]"
                      i18n:translate=""
                      tal:attributes="value python: item[0];
                                      selected python: member.getProperty('pcng_send_attachments') == item[0]"
              />
            </select>
          </div>
        </div>

        <div class="field">
          <label i18n:translate="position_searchform" >Position of search form</label>
          <div class="row">
            <select name="pcng_position_searchform">
              <option tal:repeat="item python: (('bottom', 'Bottom'), ('top', 'Top'))"
                      tal:content="python: item[1]"
                      i18n:translate=""
                      tal:attributes="value python: item[0];
                                      selected python: member.getProperty('pcng_position_searchform') == item[0]"
              />
            </select>
          </div>
        </div>

        <div class="field">
          <label i18n:translate="open_issue_in_new_window" >Open issues in a new window</label>
          <div class="row">
            <select name="pcng_issue_in_new_window:int">
              <option tal:repeat="item python: ((0, 'No'), (1, 'Yes'))"
                      tal:content="python: item[1]"
                      i18n:translate=""
                      tal:attributes="value python: item[0];
                                      selected python: member.getProperty('pcng_issue_in_new_window') == item[0]"
              />
            </select>
          </div>
        </div>

        <div class="field">
          <label i18n:translate="default_issue_view" >Default issue view</label>
          <div class="row">
            <select name="pcng_default_view">
              <option tal:repeat="item python: (('full', 'Full view'), ('fullimages', 'Full view with images'))"
                      tal:content="python: item[1]"
                      i18n:translate=""
                      tal:attributes="value python: item[0];
                                      selected python: member.getProperty('pcng_default_view') == item[0]"
              />
            </select>
          </div>
        </div>

        <div class="field">
          <label i18n:translate="hits_per_page" >Number of issues per page</label>
          <div class="row">
            <select name="pcng_hits_per_page:int">
              <option tal:repeat="item python: ((10,10), (20,20), (50,50), (100,100), (200,200))"
                      tal:content="python: item[1]"
                      i18n:translate=""
                      tal:attributes="value python: item[0];
                                      selected python: member.getProperty('pcng_hits_per_page') == item[0]"
              />
            </select>
          </div>
        </div>

        <input type="submit" value=" Save changes " i18n:attributes="value" class="standalone">
        &nbsp; &nbsp;
        <input type="reset"  value=" Reset "        i18n:attributes="value" class="standalone">

        </fieldset>
  </form>	


  <form method="post" action="pcng_edit_saved_searches">
    <fieldset>
      <legend i18n:translate="saved_searches">Saved searches</legend>
        <select name="query_id" size="3">
          <tal:loop tal:repeat="saved_search python: member.getProperty('pcng_saved_searches') " >
            <option tal:content="python: '::'.join(saved_search.split('::', 2)[:2])" 
                    tal:attributes="value python: '::'.join(saved_search.split('::', 2)[:2])"
                />

          </tal:loop>
        </select>
        <br> <br>
        <input type="submit" value="Delete" name="delete" class="standalone" i18n:attributes="value">
    </fieldset>
  </form>			   

</div>

</body>
</html>

                    
