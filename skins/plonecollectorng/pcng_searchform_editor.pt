<html xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      metal:use-macro="here/main_template/macros/master"
      i18n:domain="plonecollectorng">

<body>
  <metal:block metal:fill-slot="head_slot">
    <link rel="Stylesheet" type="text/css" tal:attributes="href string:$portal_url/pcng_styles.css" />
  </metal:block>

  <div metal:fill-slot="main">

    <metal:block tal:define="action string: Search form editor">
      <span metal:use-macro="here/pcng_macros/macros/collector_headline" />
    </metal:block>

    <form method="post" action="update_searchform" 
          tal:define="settings here/getSearchForm;
                      schema here/atse_getSchema">

      <table class="listing">
        <tr>
          <th i18n:translate="field">Field</th>
          <th i18n:translate="appears_in_search_form_as">appears in search form as</th>
          <th i18n:translate="indexed_as">indexes as</th>
        </tr>

        <tr tal:repeat="item here/pcng_get_searchfields">
          <td>
            <span tal:content="python: item"/>
            <tal:def tal:condition="python: schema.has_key(item)">
              (<span tal:replace="python: here.atse_getFieldType(schema[item])" />)
            </tal:def>
          </td>
          <td>
            <select tal:attributes="name python:'field_%s:mode:string' % item">
              <option value="hidden" i18n:translate="hidden"
                      tal:attributes="selected python: settings.get(item,{}).get('mode')=='hidden'">
                Hidden</option>
              <option value="stringwidget" i18n:translate="stringfield"
                      tal:attributes="selected python: settings.get(item,{}).get('mode')=='stringwidget'">
                String widget</option>
              <option value="selectwidget" i18n:translate="selectwidget"
                      tal:attributes="selected python: settings.get(item,{}).get('mode')=='selectwidget'">
                Select widget</option>
            </select>
          </td>
          <td i18n:translate="" tal:content="python: here.pcng_getIndexTypeFor(item)" />
        </tr>

      </table>
      <input type="submit" value="Save" i18n:attributes="value" class="standalone">
    </form>

  </div>
</body>
</html>
