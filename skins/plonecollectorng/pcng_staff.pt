<html xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      metal:use-macro="here/main_template/macros/master"
      i18n:domain="plonecollectorng">

<body>
<div metal:fill-slot="css_slot">
  <metal:define metal:use-macro="here/pcng_css/macros/stylesheet" />
</div>
<div metal:fill-slot="main">	  
  <h1 i18n:translate="legend_staff">Staff</h1>
  <form action="set_staff" method="post">
      <table class="listing" 
             tal:define="managers here/getManagers;
                         supporters here/getSupporters;
                         reporters here/getReporters">
        <tr>
          <th i18n:translate="UserID">User ID</th>
          <th i18n:translate="Name">Name</th>
          <th i18n:translate="Email">Email</th>
          <th i18n:translate="Managers">Administrator</th>
          <th i18n:translate="Supporter">Supporter</th>
          <th i18n:translate="Reporter">Reporter</th>
        </tr>

        <span tal:repeat="item python: (('Assigned', here.getTrackerUsers(staff_only=1)),
                                        ('Unassigned', here.getTrackerUsers(unassigned_only=1)))">
          <span tal:define="headline python: item[0]; users python: item[1]" >
            <tr>
              <th class="staff" colspan="6" tal:content="headline" />
            </tr>
            <span tal:repeat="user users" >
          
              <tr class="odd" tal:attributes="class python:test(repeat['user'].even(), 'even', 'odd')">
                <td tal:content="user/username" />
                <td tal:content="user/fullname|nothing" />
                <td tal:content="user/email|nothing" />
                <td style="text-align: center">
                  <input type="checkbox" name="managers:list:string" 
                         tal:attributes="value user/username;
                                         checked python: user['username'] in managers" />
                </td>
                <td style="text-align: center">
                  <input type="checkbox" name="supporters:list:string" 
                         tal:attributes="value user/username;
                                         checked python: user['username'] in supporters" />
                </td>
                <td style="text-align: center">
                  <input type="checkbox" name="reporters:list:string" 
                         tal:attributes="value user/username;
                                         checked python: user['username'] in reporters" />
                </td>
              </tr>
            </span>
          </span>
        </span>
       <tr> <td colspan="6"><hr></td></tr>
       <tr>
         <td colspan="6">
         <b>Collector administors</b> are responsible for the configuration and the
         maintainance of a collector
         <br><b>Supporters</b> work on issues. Usually issues are assigned to a supporter
         in order to resolve the issue.
         <br><b>Reporter</b> file new issues and have only limited rights on an issue
         after the issue has been filed.
         </td>
       </tr>
      </table>

      <div class="row">
        <div class="label">&nbsp;</div>
        <div class="field">
          <input class="context" type="submit" value=" Save " i18n:attributes="value" class="standalone"/>
          <input class="context" type="reset" value=" Reset " i18n:attributes="value" class="standalone"/>
        </div>
      </div> <!-- End row -->

  </form>
</div>
</body>
</html>
