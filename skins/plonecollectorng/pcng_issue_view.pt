<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US"
      lang="en-US"
      i18n:domain="plonecollectorng"
      metal:use-macro="here/main_template/macros/master">
  <body>
    <div metal:fill-slot="main">
      <h1 tal:content="string: ${here/title_or_id} (${here/status})" />

      <div class="group" tal:repeat="fieldset python: ('issuedata',)">
        <span class="legend" tal:content="fieldset" />

        <metal:block tal:repeat="fieldname python: ('title', 'description', 'solution')" >
          <div class="row" tal:condition="python: getattr(here, fieldname)" >
	        <span metal:use-macro="python: here.widget(fieldname, mode='view', use_label=1)"/>
          </div>
        </metal:block> 

        <b i18n:translate="topic">Topic: </b> <span class="field"  tal:content="here/topic" />&nbsp;&nbsp;
        <b i18n:translate="classification">Classification: </b><span class="field" tal:content="here/classification" />&nbsp;&nbsp;
        <b i18n:translate="importance">Importance: </b><span class="field" tal:content="here/importance" />&nbsp;&nbsp;
        <b i18n:translate="status">Status: </b><span class="field" tal:content="python: here.pcng_format_status(here.status())" />&nbsp;&nbsp;
        <b i18n:translate="assigned_to">Assigned to: </b><span class="field" tal:content="python: ', '.join(here.assigned_to(sorted=1))" />
      </div>

      <div class="group">
        <span class="legend" i18n:translate="progress">Progress</span>
        <div class="row" tal:repeat="field python: here.schema_getSchema('progress').fields()">
          <span metal:use-macro="python: here.widget(field.getName(), mode='view', use_label=1)" />
        </div> 
      </div>

      <!-- should be refactored as a macro !? -->
      <div class="group">
        <span class="legend" i18n:translate="contact">Contact</span>
        <div class="row" tal:repeat="field python: here.schema_getSchema('contact').fields()">
          <span metal:use-macro="python: here.widget(field.getName(), mode='view', use_label=1)" />
        </div>
      </div>

      <div metal:use-macro="here/issue_macros/macros/issue_uploads" /> 
      <div metal:use-macro="here/issue_macros/macros/issue_references" /> 
      <div class="group"><span class="legend" i18n:translate="transcript">Transcript</span>
        <div metal:use-macro="here/pcng_macros/macros/transcript_plain" /> 
      </div>
      <div metal:use-macro="here/issue_macros/macros/watchlist" /> 

    </div>
  </body>
</html>
