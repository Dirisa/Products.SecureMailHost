<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US"
      lang="en-US"
      metal:use-macro="here/main_template/macros/master"
      i18n:domain="plone">

<metal:block fill-slot="javascript_head_slot">
<tal:block define="macro here/archetypes_custom_js/macros/javascript_head | nothing" tal:condition="macro">
  <metal:block use-macro="macro" />
</tal:block>
</metal:block>

<body>

  <metal:block metal:fill-slot="head_slot">
    <link rel="Stylesheet" type="text/css" tal:attributes="href string:$portal_url/pcng_styles.css" />
  </metal:block>

   <div metal:fill-slot="main">
      <div metal:define-macro="main"
	   tal:define="errors python:request.get('errors', {});
                   Iterator python:modules['Products.CMFPlone'].IndexIterator;
                   tabindex python:Iterator()"
           tal:omit-tag="">

      <metal:block tal:define="action string: Full edit">
        <span metal:use-macro="here/pcng_macros/macros/collector_headline" />
      </metal:block>

     <form 
	    name="edit_form"
	    method="post"
	    enctype="multipart/form-data"
        tal:attributes="action python:here.portal_form_url(template.id)">

errors:
 	<div tal:condition="errors" class="error">
          <div tal:repeat="error errors/keys">
           <strong tal:content="error">Field</strong>: <span tal:replace="python:errors[error]" />
	  </div>
	</div>

        <input type="hidden" name="data:int" value="1" />
        <input type="hidden" name="metadata:int" value="0" />

        <metal:block tal:repeat="name python: here.schema_getNames()">
          <fieldset tal:condition="python: name not in ('default',)" 
                    tal:define="schema python: here.schema_getSchema(name)">
            <legend tal:content="name" />
            <tal:fields repeat="field python: schema.fields()">
                <metal:fieldMacro use-macro="python: here.widget(field.getName(), mode='edit')"/>
            </tal:fields>
          </fieldset>
        </metal:block>

        <input type="hidden" name="form_submitted" value="1" tal:attributes="value template/id" />

        <div class="row">
            <div class="label">&nbsp;</div>
            <div class="field">
                <input class="context"
                       tabindex=""
                       type="submit"
                       name="form_submit"
                       i18n:attributes="value"
                       value="Save"
                       tal:attributes="tabindex tabindex/next;" />
            </div>
        </div>

    </form>
    </div>
</div>

</body>
</html>
