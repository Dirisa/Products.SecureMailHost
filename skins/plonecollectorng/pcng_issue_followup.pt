
<html xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      metal:use-macro="here/main_template/macros/master"
      i18n:domain="plonecollectorng">

<body>
<div metal:fill-slot="main">	  

  <form method="post" action="issue_followup">
    <div class="group"
         tal:define="assignees here/getAssignees">
      <span class="legend">Issue Followup #<span tal:content="python: len(here) + 1"/></span>

      <div class="row">
        <div class="label">Comment</div>
        <div class="field">
          <textarea name="comment" cols="80" rows="10"></textarea>
        </div>
      </div>

      <div class="row">
        <div class="label">Assigned to</div>
        <div class="field">
           <select name="assignees:list" size="7" multiple>
             <span tal:repeat="u python: here.getTrackerUsers(staff_only=1)">
               <option tal:content="string: ${u/fullname} (${u/username})"
                       tal:attributes="value u/username;
                                       selected python: u['username'] in assignees" 
                />
             </span>
           </select>
        </div>
      </div>

      <div class="row">
        <div class="label">Action</div>
        <div class="field" 
             tal:define="actions here/validActions">
          <input type="radio" name="action" value="comment" checked>Comment
          <metal:block tal:condition="python: 'accept' in actions">
            <br><input type="radio" name="action" value="accept">Accept
          </metal:block>
          <metal:block tal:condition="python: 'assign' in actions">
            <br><input type="radio" name="action" value="assign">Assign
          </metal:block>
          <metal:block tal:condition="python: 'resolve' in actions">
            <br><input type="radio" name="action" value="resolve">Resolve
          </metal:block>
          <metal:block tal:condition="python: 'reject' in actions">
            <br><input type="radio" name="action" value="reject">Reject
          </metal:block>
          <metal:block tal:condition="python: 'defer' in actions">
            <br><input type="radio" name="action" value="defer">Defer
          </metal:block>
          <metal:block tal:condition="python: 'restrict_accepted' in actions">
            <br><input type="radio" name="action" value="restrict_accepted">Restrict
          </metal:block>
          <metal:block tal:condition="python: 'resign' in actions">
            <br><input type="radio" name="action" value="resign">Resign
          </metal:block>
        </div>
      </div>

      <div class="row">
        <div class="label">&nbsp;</div>
        <div class="field">
          <input class="context" type="submit" value=" Save " i18n:attributes="value"/>
          <input class="context" type="reset" value=" Reset " i18n:attributes="value"/>
        </div>
      </div> <!-- End row -->

    </div> <!-- End group -->
  </form>
</div>
</body>
</html>
