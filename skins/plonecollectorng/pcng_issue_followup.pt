
<html xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      metal:use-macro="here/main_template/macros/master"
      i18n:domain="plonecollectorng">

<body>
<div metal:fill-slot="main">	  

  <form method="post" action="issue_followup">
    <div class="group"
         tal:define="assignees here/assigned_to">
      <span class="legend">Issue Followup #<span tal:content="python: len(here) + 1"/></span>

      <div class="row">
        <div class="label">Comment</div>
        <div class="field">
          <textarea name="comment" cols="80" rows="10"></textarea>
        </div>
      </div>

      <table>
        <tr>
          <th> Assign to </th>
          <th> Workflow action </th>
        </tr>
    
        <tr>
          <td valign="top">
            <select name="assignees:list" size="7" multiple>
              <span tal:repeat="u python: here.getTrackerUsers(staff_only=1)">
                <option tal:content="string: ${u/fullname} (${u/username})"
                        tal:attributes="value u/username;
                                        selected python: u['username'] in assignees" 
                 />
              </span>
            </select>
          </td>

          <td valign="top" tal:define="actions here/validActions">
            <input type="radio" name="action" value="comment" checked>Comment
            <metal:block tal:repeat="item python: (('accept', 'Accept'),
                                                   ('assign', 'Assign'),
                                                   ('resolve', 'Resolve'),
                                                   ('reject', 'Reject'),
                                                   ('reaccept', 'Re-Accept'),
                                                   ('resign', 'Resign'),
                                                   ('defer', 'Defer'),
                                                  )
                                    ">
                                                                   
              <span tal:condition="python: item[0] in actions">
                <br><input type="radio" name="action" tal:attributes="value python: item[0]"/><span tal:replace="python: item[1]" />
              </span>
            </metal:block>
          </td>
        </tr>
      </table>

      <div class="row">
        <div class="label">&nbsp;</div>
        <div class="field">
          <input class="context" type="submit" value=" Save " i18n:attributes="value"/>
          <input class="context" type="reset" value=" Reset " i18n:attributes="value"/>
        </div>
      </div> <!-- End row -->

    </div> 
  </form>
</div>
</body>
</html>
