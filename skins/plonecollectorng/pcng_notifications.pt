<html xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      metal:use-macro="here/main_template/macros/master"
      i18n:domain="plonecollectorng">

<body>
  <div metal:fill-slot="main">	  
    <h1 i18n:translate="legend_notifications">Notifications</h1>
    <form action="set_notification_emails" method="post">
      <div class="group" tal:condition="python: here.notification_policy != 'NoneNotificationPolicy'">
        <span class="legend" i18n:translate="collector_notifications">Collector notifications</span>

    
        <div class="row" 
             tal:define="states here/issue_states;
                         stateslen python: len(states)"
             tal:repeat="itemnum python: range((stateslen))">
          <div class="label"> 
            <span i18n:translate="" 
                  tal:content="python: states[itemnum]" />
          </div>
          <div class="field"> 
              <textarea rows="2" cols="45" 
                        tal:attributes="name python: 'notifications.%s:record:lines' % states[itemnum]"
                        tal:content="python: '\n'.join(here.getNotificationsForState(states[itemnum]))"
              ></textarea>
          </div>
        </div>
 
        <div class="row">
          <div class="label">&nbsp;</div>
          <div class="field">
            <input type="submit" class="context" value="Save"
                   i18n:attributes="value"  class="standalone"/>
            <input type="reset" class="context" value="Reset"
                   i18n:attributes="value"  class="standalone"/>
          </div>
        </div> <!-- End row -->
  
      </div> <!-- End group -->
    </form>
   <div class="group" tal:condition="python: here.notification_policy == 'NoneNotificationPolicy'">
   <span i18n:translate="notification_mode_disabled">Notification mode is disabled</span>.
   </div>
  </div>
</body>
</html>
