<html xmlns:tal="http://xml.zope.org/namespaces/tal"
	xmlns:metal="http://xml.zope.org/namespaces/metal"
    i18n:domain="plonecollectorng"
	metal:use-macro="here/main_template/macros/master">
<body>

  <metal:block metal:fill-slot="head_slot">
    <link rel="Stylesheet" type="text/css" tal:attributes="href string:$portal_url/pcng_styles.css" />
  </metal:block>

  <div metal:fill-slot="main">

    <metal:block tal:define="action string: Member preferences">
      <span metal:use-macro="here/pcng_macros/macros/collector_headline" />
    </metal:block>

    <fieldset>
      <legend i18n:translate="preferences">Preferences</legend>
      <form method="post" action="pcng_set_member_preferences">
        <metal:block tal:repeat="item python: ( 
                                         ('fullname','Name'), 
                                         ('pcng_company','Company'), 
                                         ('pcng_position','Position'), 
                                         ('pcng_address','Address'),
                                         ('pcng_city','City'),
                                         ('pcng_phone','Phone'),
                                         ('pcng_fax','Fax'),
                                         )">   
          <div class="row">
            <div class="label" i18n:translate="" tal:content="python: item[1]" />
            <div class="field">
              <input type="text" tal:attributes="value python: member.getProperty(item[0]); name python: item[0]">
            </div>
          </div>
        </metal:block>

        <div class="row">
          <div class="label" i18n:translate="send_emails" >Send notification emails</div>
          <div class="field">
            <select name="pcng_send_emails">
              <option tal:repeat="item python: (('no', 'No'), ('yes', 'Yes'))"
                      tal:content="python: item[1]"
                      i18n:translate=""
                      tal:attributes="value python: item[0];
                                      selected python: member.getProperty('pcng_send_emails') == item[0]"
              />
            </select>
          </div>
        </div>

        <div class="row">
          <div class="label" i18n:translate="send_attachments" >Send attachments within notification emails</div>
          <div class="field">
            <select name="pcng_send_attachments">
              <option tal:repeat="item python: (('no', 'No'), ('yes', 'Yes'))"
                      tal:content="python: item[1]"
                      i18n:translate=""
                      tal:attributes="value python: item[0];
                                      selected python: member.getProperty('pcng_send_attachments') == item[0]"
              />
            </select>
          </div>
        </div>

        <div class="row">
          <div class="label" i18n:translate="position_searchform" >Position of search form</div>
          <div class="field">
            <select name="pcng_position_searchform">
              <option tal:repeat="item python: (('bottom', 'Bottom'), ('top', 'Top'))"
                      tal:content="python: item[1]"
                      i18n:translate=""
                      tal:attributes="value python: item[0];
                                      selected python: member.getProperty('pcng_position_searchform') == item[0]"
              />
            </select>
          </div>
        </div>

        <div class="row">
          <div class="label" i18n:translate="default_searchform" >Default search form</div>
          <div class="field">
            <select name="pcng_default_searchform">
              <option tal:repeat="item python: (('simple', 'Simple search form'), ('advanced', 'Advanced search form'))"
                      tal:content="python: item[1]"
                      i18n:translate=""
                      tal:attributes="value python: item[0];
                                      selected python: member.getProperty('pcng_default_searchform') == item[0]"
              />
            </select>
          </div>
        </div>

        <div class="row">
          <div class="label" i18n:translate="default_issue_view" >Default issue view</div>
          <div class="field">
            <select name="pcng_default_view">
              <option tal:repeat="item python: (('simple', 'Simple view'), ('full', 'Full view'), ('fullimages', 'Full view with images'))"
                      tal:content="python: item[1]"
                      i18n:translate=""
                      tal:attributes="value python: item[0];
                                      selected python: member.getProperty('pcng_default_view') == item[0]"
              />
            </select>
          </div>
        </div>

        <div class="row">
          <div class="label" i18n:translate="hits_per_page" >Number of issues per page</div>
          <div class="field">
            <select name="pcng_hits_per_page:int">
              <option tal:repeat="item python: ((10,10), (20,20), (50,50), (100,100), (200,200))"
                      tal:content="python: item[1]"
                      i18n:translate=""
                      tal:attributes="value python: item[0];
                                      selected python: member.getProperty('pcng_hits_per_page') == item[0]"
              />
            </select>
          </div>
        </div>

        <input type="submit" value=" Save changes " i18n:attributes="value" class="standalone">
        &nbsp; &nbsp;
        <input type="reset"  value=" Reset "        i18n:attributes="value" class="standalone">
      </form>			   
    </fieldset>

    <fieldset>
      <legend i18n:translate="saved_searches">Saved searches</legend>
      <form method="post" action="pcng_edit_saved_searches">
        <select name="query_id" size="3">
          <tal:loop tal:repeat="saved_search python: member.getProperty('pcng_saved_searches') " >
            <option tal:content="python: '::'.join(saved_search.split('::', 2)[:2])" 
                    tal:attributes="value python: '::'.join(saved_search.split('::', 2)[:2])"
                />

          </tal:loop>
        </select>
        <br> <br>
        <input type="submit" value="Delete" name="delete" class="standalone" i18n:attributes="value">
      </form>			   
    </fieldset>
  </div>
</body>
</html>

