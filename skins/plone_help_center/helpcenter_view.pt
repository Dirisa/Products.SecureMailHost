<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      lang="en"
      metal:use-macro="here/main_template/macros/master"
      i18n:domain="plone">
      
<head>
    <metal:css fill-slot="css_slot">
    <style type="text/css" media="all"
           tal:content="string: @import url($portal_url/helpcenter.css);"></style>
    </metal:css>

    <metal:override fill-slot="column_two_slot" />

</head>
<body>

<metal:main fill-slot="main">
    <tal:main-macro metal:define-macro="main"
                    tal:define="my_path python: '/'.join(here.getPhysicalPath());
                                subtypes python:{'HelpCenterFAQFolder':'HelpCenterFAQ',
                                       'HelpCenterTutorialFolder':'HelpCenterTutorial',
                                       'HelpCenterLinkFolder':'HelpCenterLink',
                                       'HelpCenterErrorReferenceFolder':'HelpCenterErrorReference',
                                       'HelpCenterHowToFolder':'HelpCenterHowTo'}">
            <h1 tal:content="here/title_or_id" class="documentFirstHeading">
              Title or id
            </h1>
        
            <div metal:use-macro="here/document_actions/macros/document_actions">
                Document actions (print, sendto etc)
            </div>
        
            <div class="documentDescription"
                 tal:content="here/Description">
                description
            </div>
        
            <p>
            RSS feed for all documentation types: 
            <a tal:attributes="href python:portal_url + '/search_rss?sort_on=modified&sort_order=descending&path=' + my_path + '&' + ('&'.join(['portal_type=%s' % s for s in subtypes.keys() ]))" title="RSS feed for all documentation types">
            <img tal:attributes="src string:$portal_url/rss.gif"></a>
            </p>

            <tal:defs define="help_types python: here.portal_catalog(portal_type=subtypes.keys(), path=my_path)">
              <tal:listings repeat="help_type help_types">
                <div tal:define="folder_path python: '/'.join(help_type.getObject().getPhysicalPath()); objs python:here.portal_catalog(portal_type=subtypes[help_type.portal_type], path=folder_path)">

                    <div class="portlet portletThirdWidth">
                        <h6>
                        <a tal:attributes="href help_type/getURL;
                                           title help_type/Description|nothing;">
                        Latest <span tal:replace="help_type/Title">[type]</span>
                        </a>
                        </h6>

                        <div class="portletBody">
                            
                            <tal:list condition="objs">
                            <div class="portletContent"
                                 tal:repeat="obj objs">
                                 
                                <img src="" alt="" 
                                     tal:attributes="src obj/getIcon"
                                      />
                                <a href="#" 
                                   tal:attributes="href obj/getURL" 
                                   tal:content="obj/Title">title</a>
                            </div>
                            </tal:list>
                        
                            <div class="portletContent odd">
                                <a class="portletMore"
                                   tal:attributes="href help_type/getURL" 
                                   tal:content="structure string: More ${help_type/Title}&#8230;"
                                   >More FAQs</a>
                            </div>
                        </div>

                    </div>
                </div>
            </tal:listings>
            <tal:nolist tal:condition="python: not help_types and not here.contentValues(subtypes.keys())">
              <!-- or at least none that this person has the rights to see -->
              <p class="discreet">There are no contained help center object types.</p>
            </tal:nolist>
            <tal:nopublished tal:condition="python: not help_types and here.contentValues(subtypes.keys())">
              <!--- this user has perms to see the contained types, except that particular state(s) are required -->
              <p class="discreet">There are contained help center object types, but none will are viewable because of their state.</p>
            </tal:nopublished>
            </tal:defs>

        <div class="visualClear"></div>
      
        </tal:main-macro>
    </metal:main>

  </body>
</html>
