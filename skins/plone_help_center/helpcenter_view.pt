<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      lang="en"
      metal:use-macro="here/main_template/macros/master"
      i18n:domain="plonehelpcenter">
      
<head>
    <metal:css fill-slot="css_slot">
    <style type="text/css" media="all"
           tal:content="string: @import url($portal_url/helpcenter.css);"></style>
    </metal:css>

    <metal:override fill-slot="column_two_slot" />

</head>
<body>

<metal:main fill-slot="main">
    <tal:main-macro metal:define-macro="main"
                    tal:define="my_path python: '/'.join(here.getPhysicalPath());
                    subtypes_tuples python:(
                                     ('HelpCenterFAQFolder','HelpCenterFAQ'),
                                     ('HelpCenterHowToFolder','HelpCenterHowTo'),
                                     ('HelpCenterTutorialFolder','HelpCenterTutorial'),
('HelpCenterReferenceManualFolder','HelpCenterReferenceManual'),
                                     ('HelpCenterLinkFolder','HelpCenterLink'),
                                     ('HelpCenterErrorReferenceFolder','HelpCenterErrorReference'),
                                     ('HelpCenterGlossary','HelpCenterDefinition'),
                                     ('HelpCenterInstructionalVideoFolder','HelpCenterInstructionalVideo'));
                    subtypes python: [ t[0] for t in subtypes_tuples ];
                    rss_subtypes python: [ t[1] for t in subtypes_tuples ];">
            <h1 tal:content="here/title_or_id" class="documentFirstHeading">
              Title or id
            </h1>
        
            <div metal:use-macro="here/document_actions/macros/document_actions">
                Document actions (print, sendto etc)
            </div>
        
            <form name="searchform"
                  action="phc_search"
                  tal:attributes="action string:${here/absolute_url}/phc_search">
                   
                <fieldset style="float: right;">
                    
                    <legend i18n:translate="phc_doc_search">Documentation search</legend>
                    
                    <label for="searchGadget" class="hiddenStructure" i18n:translate="text_search">Search</label>
                    <input name="SearchableText"
                           type="text"
                           size="20"
                           value=""
                           alt="Search"
                           title="Search"
                           style="margin-bottom: 0.5em;"
                           accesskey="accesskeys-search"
                           i18n:attributes="alt accesskey title"
                           tal:attributes="value request/SearchableText|nothing;
                                           tabindex tabindex/next" 
                    />
    
                    <input class="searchButton"
                           type="submit"
                           value="Search"
                           accesskey="accesskeys-search"
                           tal:attributes="tabindex tabindex/next"
                           i18n:attributes="value accesskey" />
                           
                    <br />
                    
                    in
                    
                      <select name="phc_selection">
                        <option value="all"><span i18n:translate="phc_full_area">Entire documentation area</span></option>
                        <option value="faq"><span i18n:translate="phc_faq">FAQs</span></option>
                        <option value="howto"><span i18n:translate="phc_howto">How-tos</span></option>
                        <option value="tutorial"><span i18n:translate="phc_tutorial">Tutorials</span></option>
                    </select>
                </fieldset>
            </form>

            <div class="documentDescription"
                 tal:content="here/Description">
                description
            </div>
        
            <p>
            <img tal:attributes="src string:$portal_url/rss.gif" />
            <a tal:attributes="href python:here.getSyndicationURL(portal_url, my_path,
            rss_subtypes)" title="RSS feed for all documentation types">
	    <span i18n:translate="phc_rss_all">RSS feed for all documentation types</span>
            </a>
            </p>

            <p>
            <img tal:attributes="src string:$portal_url/helpcenter_icon.gif" />
            <a href="helpcenter_help"
	    	tal:attributes="href string:phc_help_doc"
		i18n:attributes="href">
            <span i18n:translate="phc_contrib_use">Instructions on how to contribute to and use this resource</span>
            </a>
            </p>

            <div class="visualClear"></div>
            
            <tal:defs define="help_types python: here.portal_catalog(portal_type=subtypes, path=my_path)">
              <tal:listings repeat="help_type_tuple subtypes_tuples">
                <div tal:define="help_types python: [c for c in help_types if c.portal_type==help_type_tuple[0]];
                                 help_type  python: help_types and help_types[0]" 
                     tal:condition="help_type">
                  <div tal:define="folder_path python: '/'.join(help_type.getObject().getPhysicalPath());
                                   objs python:here.portal_catalog(portal_type=help_type_tuple[1], 
                                                                   path=folder_path,
                                                                   review_state='published',
                                                                   sort_on='modified', 
                                                                   sort_order='reverse', 
                                                                   sort_limit=5)[:5]">

                    <div class="portlet portletThirdWidth"
		    	tal:define="mylatest string:latest_${help_type/id}">
                        <h6>
                        <a tal:attributes="href help_type/getURL;
                                           title help_type/Description|nothing;">
				<span i18n:translate="">
				<span tal:replace="mylatest">LATEST DOCS</span>
				</span>
                        </a>
                        </h6>

                        <div class="portletBody">
                            
                            <tal:list condition="objs">
                            <div class="portletContent"
                                 tal:repeat="obj objs">
                                 
                                <img src="" alt="" 
                                     tal:attributes="src obj/getIcon"
                                      />
                                <a href="#" 
                                   tal:attributes="href obj/getURL" 
                                   tal:content="obj/Title">title</a>
                            </div>
                            </tal:list>
                        
                            <div class="portletContent odd"
			    	tal:define="myall string:All_${help_type/id}">
				<a class="portletMore"
				   tal:attributes="href help_type/getURL;
                                           title help_type/Description|nothing;"> 
                                   <span i18n:translate="">
				   	<span tal:replace="myall">ALL DOCS</span>
				   </span>
				   </a>
                            </div>
                          </div>
                        </div>

                    </div>
                </div>
                <div class="visualClear" tal:condition="python: repeat['help_type_tuple'].number() % 3 == 0" />
            </tal:listings>
            <tal:nolist tal:condition="python: not help_types and not here.contentValues(subtypes)">
              <!-- or at least none that this person has the rights to see -->
              <p class="discreet" i18n:translate="phc_nolist">
              There are no contained help center object types.
              </p>
            </tal:nolist>
            <tal:nopublished tal:condition="python: not help_types and here.contentValues(subtypes)">
              <!--- this user has perms to see the contained types, except that particular state(s) are required -->
              <p class="discreet" i18n:translate="phc_nopublished">
              There are contained help center object types, but none are 
              viewable because of their permission settings.
              </p>
            </tal:nopublished>
            </tal:defs>

        <div class="visualClear"> <br> </div>
      
        </tal:main-macro>
    </metal:main>

  </body>
</html>
