<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
  lang="en"
  metal:use-macro="here/main_template/macros/master"
  i18n:domain="plonehelpcenter">

  <head>
    <metal:css fill-slot="css_slot">
      <style type="text/css" media="all"
        tal:content="string: @import url($portal_url/helpcenter.css);"></style>
    </metal:css>
  </head>

  <body>
    <div metal:fill-slot="main"
         tal:define="global getInfoFor nocall:here/portal_workflow/getInfoFor">

    <h1 tal:content="here/Title" class="documentFirstHeading">
      Folder Title
    </h1>

    <div metal:use-macro="here/document_actions/macros/document_actions">
      Document actions (print, sendto etc)
    </div>

    <div class="documentDescription"
         tal:content="here/Description">
      Description.
    </div>

    <div tal:repeat="section here/getSectionsToList">

        <h2 tal:content="section">Section Heading</h2>

        <dl>
            <tal:video tal:repeat="video python:here.getItemsBySection(
                                           section=section, 
                                           states = test(
                                             user.has_role(['Owner', 'Reviewer', 'Manager'], context), 
                                             ['published', 'pending'], 
                                             ['published']
                                           )
                                         )">
            <dt>
                <div style="float:right; text-align: center; margin: 1em 0 1em 1em;"
                     tal:condition="video/screenshot_thumb | nothing">
                    <a class="discreet"
                       tal:attributes="href string:${video/absolute_url}/screenshot/image_view_fullscreen">
                        <img tal:replace="structure video/screenshot_thumb" />
                        <br />
                        <img tal:replace="structure here/search_icon.gif" />
                        <span i18n:translate="label_click_to_enlarge">
                            Click to enlarge
                        </span>
                    </a>
                </div>
                <img tal:replace="structure here/movie_icon.gif" />
                <a href="" tal:content="video/Title"
                   tal:define="review_state python:getInfoFor(video, 'review_state', None)"
                   tal:attributes="href video/absolute_url;
                                   class string:state-$review_state">Video</a>
            </dt>
            
            <dd tal:content="video/Description">Description</dd>
            <div class="discreet" tal:define="getObjSize nocall:portal/getObjSize">
                <strong>Duration:</strong>
                <span tal:content="video/duration" tal:condition="video/duration | nothing">
                      Duration
                </span> minutes
                <br />
                <strong>Size:</strong>
                <span tal:content="python:getObjSize(video)" tal:condition="video/video_file | nothing">
                      Size
                </span>
            </div>
          </tal:video>
        </dl>

    </div>

    <div metal:use-macro="here/document_byline/macros/byline">
      Get the byline - contains details about author and modification date.
    </div>
    </div>
  </body>

</html>
