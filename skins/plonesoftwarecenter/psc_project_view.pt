<html xmlns="http://www.w3.org/1999/xhtml"
      xml:lang="en"
      lang="en"
      i18n:domain="archpackage"
      metal:use-macro="here/main_template/macros/master">

<body>

<div metal:fill-slot="main">

  <div metal:define-macro="main" tal:define="latestrelease here/getLatestRelease">

        <h1 class="documentFirstHeading">
            <img tal:replace="structure here/product_icon.gif" />
            <span tal:replace="here/title_or_id">Title or id</span>
        </h1>

        <div metal:use-macro="here/document_actions/macros/document_actions">
            Document actions (print, sendto etc)
        </div>

        <div tal:condition="here/isRecommended">
            This is a recommended project.
        </div>

        <div class="discreet">
            Category: <span tal:replace="python: ', '.join(here.getCategories())" />
        </div>

        <div class="documentDescription"
             tal:content="here/Description">
            description
        </div>

        <p class="portalMessage"
           tal:condition="python: is_editable and wtool.getInfoFor(here, 'review_state')!='published'">
        This project has not been approved yet, make sure you submit it for
        approval when all the information is correct to make it available
        to the general public.
        </p>        

        <h2 i18n:translate="heading_latest_release">Latest release</h2>

        <tal:noreleases tal:condition="not:latestrelease">

            <p class="discreet" i18n:translate="description_no_available_releases">
                    There are no available releases in this project yet.
            </p>
            <p class="discreet" tal:condition="is_editable">
                <a i18n:translate=""
                   tal:attributes="href string:$here_url/releases">
                  Go to the release folder to add a release.
                </a>
            </p>

        </tal:noreleases>

        <tal:releases condition="latestrelease">

            <div class="visualIEFloatFix" style="margin-top: 1em;">
                <div style="float:right; text-align: center; margin: 1em 0 1em 1em;"
                     tal:condition="latestrelease/screenshot_thumb | nothing">
                    <a class="discreet"
                       tal:attributes="href string:${latestrelease/absolute_url}/screenshot/image_view_fullscreen">
                        <img tal:replace="structure latestrelease/screenshot_thumb" />
                        <br />
                        <img tal:replace="structure here/search_icon.gif" />
                        <span i18n:translate="label_click_to_enlarge">
                            Click to enlarge
                        </span>
                    </a>
                </div>

                <dl>

                    <dt>
                        <img tal:replace="structure here/product_icon.gif" />
                        <a href="#"
                           tal:content="latestrelease/Title"
                           tal:attributes="href latestrelease/absolute_url">Ploneboard 1.0</a>
                    </dt>

                    <dd>
                        <span tal:replace="latestrelease/Description">
                            Main focus for this release is blah blah.
                        </span>

                        <br />
                        <img tal:replace="structure here/document_icon.gif" />
                        <a href="#"
                           i18n:translate="label_read_more"
                           tal:attributes="href latestrelease/absolute_url">Read more</a>

                        <tal:downloads tal:repeat="download latestrelease/contentValues">

                            <br />
                            <img tal:replace="structure here/download_icon.gif" />
                            <a href="#"
                               tal:condition="not:download/getExternalURL"
                               tal:attributes="href string:${download/absolute_url}">
                                <span i18n:translate="label_download">Download</span>
                                <span tal:replace="download/Title">Windows Installer</span>
                                (<span tal:replace="python: here.getObjSize(download)">256KB</span>)

                            </a>
                            
                            <a href="#"
                               class="link-plain"
                               tal:condition="download/getExternalURL"
                               tal:attributes="href download/getExternalURL">
                                <span i18n:translate="label_download">Download</span>
                                <span tal:replace="download/Title">Windows Installer</span>
                            </a>
                        </tal:downloads>
                    </dd>

                    <dt>
                    <!-- Should be a dedicated template that only lists releases,
                         using the folder_listing macro, but will just use this
                         for now. Should also only be visible if releases > 1. -->
                        <img tal:replace="structure here/hour_icon.gif" />
                        <a i18n:translate="label_previous_releases"
                           tal:attributes="href python:here.getReleaseFolder().absolute_url()">Show older releases&#8230;</a>
                    </dt>

                    <dt>
                        <img tal:replace="structure here/improvementproposal_icon.gif" />
                        <a i18n:translate="label_previous_releases"
                           tal:attributes="href python:here.getRoadmapFolder().absolute_url()">Show upcoming releases&#8230;</a>

                    </dt>

                </dl>
            </div>

        </tal:releases>

        <div class="visualClear"></div>

        <h2>Project Description</h2>

        <fieldset style="float: right;">
            <legend>Additional resources</legend>
            
            <ul style="list-style-type: none; list-style-image: none; margin-left: 0;">
                <li tal:condition="here/getHomepage">
                    <a href=""
                       style="display: block"
                       class="link-plain" 
                       tal:attributes="href here/getHomepage">
                    <img src="" alt=""
                         tal:attributes="src string:${portal_url}/link_icon.gif" />
                    Project home page
                    </a>
                </li>
                
                <li tal:condition="here/getTracker">
                    <a href=""
                       style="display: block"
                       class="link-plain" 
                       tal:attributes="href here/getTracker">
                    <img src="" alt=""
                         tal:attributes="src string:${portal_url}/issuetracker_icon.gif" />
                    Issue tracker
                    </a>
                </li>
                
                <li tal:condition="here/getMailingList">
                    <a href=""
                       style="display: block"
                       class="link-plain" 
                       tal:attributes="href here/getMailingList">
                    <img src="" alt=""
                         tal:attributes="src string:${portal_url}/info_icon.gif" />
                    Support
                    </a>
                </li>
                
                <li tal:condition="here/getRepository">
                    <a href=""
                       style="display: block"
                       class="link-plain" 
                       tal:attributes="href here/getRepository">
                    <img src="" alt=""
                         tal:attributes="src string:${portal_url}/sitemap_icon.gif" />
                    Development repository
                    </a>
                </li>

            </ul>
            
           
        </fieldset>

        <div tal:replace="structure here/getText" />

<tal:comment replace="nothing">
 XXX: FIXME

        <h2 i18n:translate="heading_documentation">Documentation</h2>
</tal:comment>

        <div class="visualClear"></div>

        <div metal:use-macro="here/document_byline/macros/byline">
            Get the byline - contains details about author and modification date.
        </div>

    </div>

</div>

</body>
</html>