<html xmlns="http://www.w3.org/1999/xhtml"
      xml:lang="en"
      lang="en"
      i18n:domain="plonesoftwarecenter"
      metal:use-macro="here/main_template/macros/master">

<body>

<div metal:fill-slot="main">

  <div metal:define-macro="main" tal:define="latestrelease here/getLatestRelease">

        <h1 class="documentFirstHeading">
            <img tal:replace="structure here/product_icon.gif" />
            <span tal:replace="here/title_or_id">Title or id</span>
        </h1>

        <div metal:use-macro="here/document_actions/macros/document_actions">
            Document actions (print, sendto etc)
        </div>

        <tal:disabled replace="nothing">
        
            This is disabled until we have a consensus about what to do with
            recommended projects (politically, practically). If this is re-
            enabled, it must also be re-enabled in schemata.py and
            psc_releasefolder_view.pt.
            
            <div tal:condition="here/isRecommended">
                This is a recommended project.
            </div>
        </tal:disabled>

        <div class="discreet">
            Category: <span tal:replace="python: ', '.join(here.getCategoryTitles())" />
            &mdash;
            <a href=""
               tal:attributes="href string:${portal_url}/search?portal_type%3Alist=PSCProject&Creator=${here/Creator}"
               >Other products by this author</a>

        </div>

        <div style="float:right; margin: 1em 0 1em 1em; border: 1px solid black;"
             tal:condition="here/getLogo | nothing">
            <a tal:omit-tag="not: here/getLogoURL"
               tal:attributes="href here/getLogoURL">
                <img tal:replace="structure here/getLogo" />
            </a>
        </div>

        <div class="documentDescription"
             tal:content="here/Description">
            description
        </div>
        
        <div class="visualClear"></div>

        <p class="portalMessage"
           i18n:translate="description_cannot_add_before_approved"
           tal:condition="python: is_editable and wtool.getInfoFor(here, 'review_state')!='published'">
           You can not add releases, documentation or feature proposals until the
           project itself is approved, make sure you submit it for approval when
           the relevant project information has been entered.
        </p>

        <h2 tal:condition="latestrelease">
            <a href="#"
               i18n:translate="heading_latest_release_project"
               tal:attributes="href latestrelease/absolute_url">
              Latest release:
              <span tal:replace="latestrelease/Title"
                    i18n:name="project">Ploneboard 1.0</span></a>
        </h2>

        <tal:noreleases tal:condition="not:latestrelease">

            <p class="discreet"
               tal:condition="python:is_editable and wtool.getInfoFor(here, 'review_state')=='published'">
                 <tal:noreleases i18n:translate="description_no_available_releases">
                    There are no published releases in this project yet.
                 </tal:noreleases>
                 <tal:prioritize i18n:translate="description_prioritize_releases">
                    This listing will prioritize releases with maturity 'Final',
                    but will list the latest published release of any other type
                    if no final release exists.
                 </tal:prioritize>
            </p>
            <p class="discreet"
               tal:condition="python: is_editable and wtool.getInfoFor(here, 'review_state')=='published'">
                <a i18n:translate="label_goto_release_folder"
                   tal:attributes="href string:$here_url/releases">
                  Go to the release folder to add or publish a release.
                </a>
            </p>

        </tal:noreleases>

        <tal:releases condition="latestrelease">

            <div class="visualIEFloatFix" style="margin-top: 1em;">
                <div style="float:right; text-align: center; margin: 1em 0 1em 1em;"
                     tal:condition="latestrelease/screenshot_thumb | nothing">
                    <a class="discreet"
                       tal:attributes="href string:${latestrelease/absolute_url}/screenshot/image_view_fullscreen">
                        <img tal:replace="structure latestrelease/screenshot_thumb" />
                        <br />
                        <img tal:replace="structure here/search_icon.gif" />
                        <span i18n:translate="label_click_to_enlarge">
                            Click to enlarge
                        </span>
                    </a>
                </div>

                <p>
                    <span tal:replace="latestrelease/Description">
                    Main focus for this release is blah blah.
                    </span>

                    <br />
                    <img tal:replace="structure here/document_icon.gif" />
                    <a href="#"
                       i18n:translate="label_read_more"
                       tal:attributes="href latestrelease/absolute_url">Read more</a>
                </p>

                <dl>
                  <tal:file tal:repeat="file latestrelease/contentValues">
                    <dt>
                        <img src="" alt="" tal:attributes="src string:${here/portal_url}/${file/getDownloadIconName}" />

                      <a class="link-plain"
                         tal:define="fileSize file/getFileSize"
                         tal:attributes="href file/getDirectURL">
                        <span i18n:translate="label_download">Download</span>
                        <span tal:replace="here/Title">Ploneboard 1.0</span>
                        for
                        <span tal:replace="file/getPlatform" />
                        <tal:size condition="fileSize">
                             (<span tal:replace="fileSize">256KB</span>)
                        </tal:size>
                        <tal:size condition="not: fileSize">
                            <tal:extfile condition="file/getExternalFileSize">
                            (<span tal:replace="file/getExternalFileSize">256KB</span>)
                            </tal:extfile>
                        </tal:size>
                      </a>

                    </dt>

                    <dd tal:content="file/Title">
                      Windows installer.
                    </dd>
                  </tal:file>
                </dl>

                <p style="float: right; clear:both;">
                    <img tal:replace="structure here/product_icon.gif" />
                    <a i18n:translate="label_show_all_releases"
                       tal:attributes="href python:here.getReleaseFolder().absolute_url()">
                       Show all releases&hellip;</a>

                    <img tal:replace="structure here/improvementproposal_icon.gif" />
                    <a i18n:translate="label_show_upcoming_releases"
                       tal:attributes="href python:here.getRoadmapFolder().absolute_url()">
                       Show Roadmap&hellip;</a>
                </p>

            </div>

        </tal:releases>

        <div class="visualClear"></div>

        <h2>Project Description</h2>

        <fieldset style="float: right; margin-left: 0.5em; margin-top: 0;">
            <legend>Additional resources</legend>

            <ul style="list-style-type: none; list-style-image: none; margin-left: 0;">
                <li tal:condition="here/getHomepage">
                    <img src="" alt=""
                         tal:attributes="src string:${portal_url}/link_icon.gif" />
                    <a href=""
                       class="link-plain"
                       title="Additional home page for this project"
                       tal:attributes="href here/getHomepage">Project home page</a>
                </li>

                <li tal:condition="here/getTracker">
                    <img src="" alt=""
                         tal:attributes="src string:${portal_url}/issuetracker_icon.gif" />
                    <a href=""
                       class="link-plain"
                       title="A place to submit bug reports and feature requests for this project"
                       tal:attributes="href here/getTracker">Issue tracker</a>
                </li>

                <li tal:condition="here/getMailingList">
                    <img src="" alt=""
                         tal:attributes="src string:${portal_url}/info_icon.gif" />
                    <a href=""
                       class="link-plain"
                       title="Support options for this product"
                       tal:attributes="href here/getMailingList">Support</a>
                </li>

                <li tal:condition="here/getRepository">
                    <img src="" alt=""
                         tal:attributes="src string:${portal_url}/sitemap_icon.gif" />
                    <a href=""
                       class="link-plain"
                       title="Version control repository location for this project"
                       tal:attributes="href here/getRepository">Development repository</a>
                </li>

                <li tal:repeat="resource here/getAdditionalContainedResources">
                    <img tal:attributes="src resource/getIcon" 
                         alt="" />
                    <a href=""
                       class="link-plain"
                       tal:attributes="href resource/getId;
                                       title resource/Description;"
                       tal:content="resource/Title">Additional resource</a>
                </li>
    
            </ul>


        </fieldset>

        <div tal:replace="structure here/getText" />

<tal:comment replace="nothing">
 XXX: FIXME

        <h2 i18n:translate="heading_documentation">Documentation</h2>
</tal:comment>

        <div class="visualClear"></div>

        <div metal:use-macro="here/document_byline/macros/byline">
            Get the byline - contains details about author and modification date.
        </div>

    </div>

</div>

</body>
</html>
