<html xmlns="http://www.w3.org/1999/xhtml"
      xml:lang="en"
      lang="en"
      metal:use-macro="here/main_template/macros/master"
      i18n:domain="plonesoftwarecenter">

<head>
    <metal:top fill-slot="top_slot">
        <tal:border define="dummy python:request.set('disable_border', 1)"/>
    </metal:top>
    <metal:css fill-slot="css_slot">
      <style type="text/css" media="all"
             tal:content="string: @import url($portal_url/plonesoftwarecenter.css);"></style>
    </metal:css>
    <metal:override fill-slot="column_two_slot" />
</head>

<body>
    <div metal:fill-slot="main"
         tal:define="global getInfoFor nocall:here/portal_workflow/getInfoFor;
                     category python:request.traverse_subpath and request.traverse_subpath[0] or nothing;">

        <tal:selection condition="not:category">
        
            <h1 class="documentFirstHeading" i18n:translate="heading_view_by_category">
              View by category
            </h1>
            
            <a href=""
              class="link-parent"
              i18n:translate="label_up_to_project_overview"
              tal:define="parent_url here/absolute_url"
              tal:condition="parent_url"
              tal:attributes="href parent_url">
              Up to project overview
            </a>
            
            Please select a category:
            
            <ul tal:define="categories here/getAvailableCategoriesAsDisplayList">
                <li tal:repeat="categoryId python:categories.keys()">
                    <a tal:attributes="href string:${here/absolute_url}/by-category/${categoryId}"
                        tal:content="python:categories.getValue(categoryId)"/>
                </li>
            </ul>
            
        </tal:selection>

        <tal:projects condition="category"
                      define="packages python:here.getPackagesByCategory(category)">
        
            <h1 class="documentFirstHeading">
              Projects in category <span tal:replace="python:here.getCategoryName(category)" />
            </h1>
            
            <a href=""
              class="link-parent"
              i18n:translate="label_up_to_project_overview"
              tal:define="parent_url here/absolute_url"
              tal:condition="parent_url"
              tal:attributes="href parent_url">
              Up to project overview
            </a>
        
            <div metal:use-macro="here/document_actions/macros/document_actions">
              Document actions (print, sendto etc)
            </div>
        
            <tal:nopackages condition="not:nocall:packages">
                <div class="discreet" i18n:translate="no_packages_found">
                    No packages found
                </div>
            </tal:nopackages>
        
            <tal:packages condition="nocall:packages">
                <div class="documentDescription">
                The available projects in this category, latest first.
                </div>

                <dl>
                  <tal:package tal:repeat="package packages">
                    <dt>
                      <img tal:replace="structure here/product_icon.gif" />
                      <a tal:attributes="href package/getURL" tal:content="package/Title">Title</a>
                      </dt>
                    <dd tal:content="package/Description">Description</dd>
                  </tal:package>
                </dl>

                <div metal:use-macro="here/document_byline/macros/byline">
                  Get the byline - contains details about author and modification date.
                </div>
            </tal:packages>

        </tal:projects>

    </div>
    
</body>

</html>
