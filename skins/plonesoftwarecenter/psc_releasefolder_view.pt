<html xmlns="http://www.w3.org/1999/xhtml"
      xml:lang="en"
      lang="en"
      i18n:domain="plonesoftwarecenter"
      metal:use-macro="here/main_template/macros/master">

<body>

<div metal:fill-slot="main">

  <div metal:define-macro="main">

        <h1 class="documentFirstHeading">
            <img tal:replace="structure here/product_icon.gif" />
            <span tal:replace="here/title_or_id">Title or id</span>
        </h1>

        <div metal:use-macro="here/document_actions/macros/document_actions">
            Document actions (print, sendto etc)
        </div>

        <div tal:condition="here/isRecommended">
            Recommended project.
        </div>

        <div class="discreet">
            Category: <span tal:replace="python: ', '.join(here.getCategories())" />
        </div>

        <div class="documentDescription"
             tal:content="here/Description">
            description
        </div>

        <h2 i18n:translate="heading_upcoming_releases">Upcoming Releases</h2>
        
        <tal:block define="global releases here/getUpcomingReleases">
            <metal:macro use-macro="here/psc_releasefolder_view/macros/release_listing"/>
        </tal:block>
        
        <h2 i18n:translate="heading_previous_releases">Downloadable Releases</h2>
        
        <tal:block define="global releases here/getPreviousReleases">
            <metal:macro use-macro="here/psc_releasefolder_view/macros/release_listing"/>
        </tal:block>

        <div metal:use-macro="here/document_byline/macros/byline">
            Get the byline - contains details about author and modification date.
        </div>

    </div>

</div>

</body>
</html>

<!-- Macro used to show releases, since we need two near identical lists -->
<!-- Call this with a variable 'releases' defined -->
<metal:macro define-macro="release_listing">
        <tal:noreleases tal:condition="not:releases">

            <div class="discreet">
                <span i18n:translate="description_no_available_releases">
                    There are no available releases in this project yet.
                </span>
                <span tal:condition="is_editable"
                      i18n:translate="description_use_add_menu_to_add_releases">
                    Use the Add menu to add releases.
                </span>
            </div>

        </tal:noreleases>

        <tal:releases repeat="release releases">

            <div class="visualIEFloatFix" style="margin-top: 1em;">
                <div style="float:right; text-align: center; margin: 1em 0 1em 1em;"
                     tal:condition="release/screenshot_thumb | nothing">
                    <a class="discreet"
                       tal:attributes="href string:${release/absolute_url}/screenshot/image_view_fullscreen">
                        <img tal:replace="structure release/screenshot_thumb" />
                        <br />
                        <img tal:replace="structure here/search_icon.gif" />
                        <span i18n:translate="label_click_to_enlarge">
                            Click to enlarge
                        </span>
                    </a>
                </div>

                <dl>

                    <dt>
                        <img tal:replace="structure here/product_icon.gif" />
                        <a href="#"
                           tal:content="release/Title"
                           tal:attributes="href release/absolute_url">Ploneboard 1.0</a>
                    </dt>

                    <dd>
                        <span tal:replace="release/Description">
                            Main focus for this release is blah blah.
                        </span>

                        <br />
                        <img tal:replace="structure here/document_icon.gif" />
                        <a href="#"
                           i18n:translate="label_read_more"
                           tal:attributes="href release/absolute_url">Read more</a>

                        <tal:downloads tal:repeat="download release/contentValues">

                            <br />
                            <img src="" alt="" tal:attributes="src string:${here/portal_url}/${download/getDownloadIconName}" />

                            <a href="#" class="link-plain"
                               tal:attributes="href download/getDirectURL">
                                <span i18n:translate="label_download">Download</span>
                                <span tal:replace="download/Title">Windows Installer</span>
                                
                                <tal:size define="fileSize download/getFileSize" condition="fileSize">
                                    (<span tal:replace="fileSize">256KB</span>)
                                </tal:size>
                            </a>
                            
                        </tal:downloads>
                    </dd>


                </dl>
            </div>

            <div class="visualClear"></div>

        </tal:releases>
</metal:macro>
