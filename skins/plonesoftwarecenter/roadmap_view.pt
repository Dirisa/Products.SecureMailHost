<html metal:use-macro="here/main_template/macros/master">
  <body>
    <div metal:fill-slot="main"
      tal:define="
      all request/all|nothing;
      review_state python:test(all, ['published','in-progress','planning'],
      ['in-progress','planning']
      );
      releases python:here.portal_catalog(getProjectURL=here.getProjectURL(), portal_type='PSCRelease', review_state=review_state);
      ">

      <h1>Roadmap</h1>

      <div tal:repeat="release releases">
        <h2 tal:content="release/Title"></h2>
        <p><a tal:attributes="href release/getURL">Release Information</a></p>

        <ul>
          <li tal:repeat="plip python:release.getObject().getRelatedFeatures()">
            <a tal:attributes="href plip/absolute_url" tal:content="plip/Title"></a>
          </li>
        </ul>

      </div>

      <p tal:condition="not: all"><a tal:attributes="href string:${current_page_url}?all=1">Show All Releases</a></p>
      <p tal:condition="all"><a tal:attributes="href string:${current_page_url}">Future Only</a></p>


    </div>
  </body>
</html>

