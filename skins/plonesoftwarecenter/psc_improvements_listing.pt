<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US"
      lang="en-US"
      i18n:domain="plone"
      metal:use-macro="here/main_template/macros/master">

<body>


<div metal:fill-slot="main"
     tal:define="
           plips python: context.portal_catalog(
                                    portal_type='PSCImprovementProposal',
                                    path='/'.join(context.getPhysicalPath())
                                    );
           b_start python:request.get('b_start', 0);
           Batch python:modules['Products.CMFPlone'].Batch;
           batch python:Batch(plips, 100, int(b_start), orphan=0);
           states python: here.portal_catalog.uniqueValuesFor('review_state');
           ">

    <h1>Improvement Proposal overview for <span tal:replace="here/aq_parent/Title" /></h1>

    <div class="documentDescription">
    An overview of the available Improvement Proposals. Members of the project
    can add new improvement proposals.
    </div>

    <p tal:condition="plips">
    If you want to see the feature proposals displayed according to what release
    they are assigned to, go to the
    <img tal:replace="structure here/improvementproposal_icon.gif" />
    <a href="psc_roadmap">Roadmap page</a>.
    </p>


    <!-- Navigation -->
    <div metal:use-macro="here/batch_macros/macros/navigation" />

        <table id="sortable"
               class="listing"
               summary="Improvement Proposal listing"
               tal:condition="plips">

            <thead>

                <tr>

                    <th style="width: 50%">&nbsp;<tal:title i18n:translate="listingheader_title"
                    >Title</tal:title>&nbsp;</th>

                    <th>&nbsp;<tal:title i18n:translate="listingheader_title"
                    >Category</tal:title>&nbsp;</th>

                    <th>&nbsp;<tal:modified i18n:translate="listingheader_modified"
                    >Modified</tal:modified>&nbsp;</th>

                    <th>&nbsp;<tal:state i18n:translate="listingheader_status"
                    >Status</tal:state>&nbsp;</th>

                    <th>&nbsp;<tal:version
                    >Target Release</tal:version>&nbsp;</th>
                </tr>
            </thead>

            <tbody>
            <metal:block tal:repeat="item batch">
                <tr tal:define="oddrow repeat/item/odd;
                                item_typeinfo item/getTypeInfo"
                    tal:attributes="class python:test(oddrow, 'even', 'odd')" >

                    <td>
                        <a href="#" tal:attributes="href item/getURL; title item/Description;">
                            <img
                                 alt="" tal:attributes="src string:${portal_url}/improvementproposal_icon.gif"
                            />&nbsp;<span tal:replace="item/Title">Title</span>
                        </a>
                    </td>

                    <td tal:content="python: ', '.join(here.getProposalTypes())">
                    Category
                    </td>

                    <td tal:content="item/ModificationDate">
                    08/19/2001 03:01 AM
                    </td>

                    <td class="private"
                        tal:define="review_state item/review_state"
                        tal:content="structure python:test(review_state, review_state, '&nbsp;')"
                        tal:attributes="class python:test(review_state, 'state-'+review_state, 'state-draft')"
                        i18n:translate="">&nbsp;
                    </td>

                    <td class="private"
                        i18n:translate="">&nbsp;

                        <span tal:repeat="ref item/getRelatedReleases">
                        <a tal:content="ref/id" tal:attributes="href ref/url">[item]</a>
                        </span>
                    </td>
                </tr>
            </metal:block>
            </tbody>
        </table>

        <p class="discreet"
           tal:condition="not: plips">
        There are no improvement proposals added for any versions. Use the add
        menu to add proposals and/or feature specifications to be used in the
        roadmap.
        </p>

        <!-- Navigation -->
        <div metal:use-macro="here/batch_macros/macros/navigation" />
</div>


</body>
</html>
