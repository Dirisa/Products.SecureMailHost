	<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US"
	      lang="en-US"
	      i18n:domain="plone"
	      metal:use-macro="here/main_template/macros/master">
	
	<body>

	<div metal:fill-slot="main"
	     tal:define="portalPath string:${request/URL1};
	                 realPath python:here.getFileRealPath(REQUEST=request);
	     				  comments python:here.getFileMetadata(REQUEST=request,section='GENERAL',option='comment');
	                 uploader python:here.getFileMetadata(REQUEST=request,section='GENERAL',option='source');
	                 revision python:here.getFileMetadata(REQUEST=request,section='GENERAL',option='revision');
	                 md5      python:here.getFileMetadata(REQUEST=request,section='DIAGNOSTICS',option='md5');
	                 numUnpackedFiles python:here.getFileMetadata(REQUEST=request,section='ARCHIVEINFO',option='num_files');
	                 sizezUnpackedFiles python:here.getFileMetadata(REQUEST=request,section='ARCHIVEINFO',option='unpacked_size');
	                 ">
			<br>
			<b>file portal path = </b>
			   <span tal:content="portalPath">
			       portalPath
			   </span>
			<br><br>
			<b>file physical path = </b>
			   <span tal:content="realPath">
			       realPath
			   </span>   
			<br>
			<br>   	
			<fieldset>
				<legend>GENERAL:</legend>
				<b>uploader = </b><span tal:content="uploader">
					uploader
				</span>
				<br>
				<b>revision = </b><span tal:content="revision">
					revision
				</span>
				<br>
				<b>comments = </b>
	         <form tal:attributes="action string:${request/URL1}/setFileMetadata" method="post">
		        <table width="100%">
		          <tr>
				       <td width="100%" valign="top">
			             <input type="hidden" name="section" value="GENERAL"/>
			             <input type="hidden" name="option" value="comment"/>
			             <textarea name="newvalue" cols="40" rows="2"
			                       tal:content="comments">
			             </textarea>
			          </td>
			       </tr>
			       <tr>   
				      <td>
		              <center><input type="submit" value="Update Comment" ></center>
		            </td>
		          </tr>
		        </table>
	         </form>
			</fieldset>	
			
			<fieldset>
				<legend>DIAGNOSTICS:</legend>
				<table>
				<tr>
				<td nowrap="nowrap">
					<b>md5 = </b><span tal:content="python:test(md5,md5,'unknown')">md5</span>
				</td>
				<td>
					<div tal:condition="md5">
					  <form tal:attributes="action string:${request/URL1}/updateFileMetadatum" method="post">
				      <input type="hidden" name="section" value="DIAGNOSTICS"/>
					   <input type="hidden" name="option" value="md5"/>
					   <input type="hidden" name="mode" value="testonly"/>
				      <input type="submit" value="test" >
			        </form>
			      </div>  
		      </td>
		      <td>
		      <form tal:attributes="action string:${request/URL1}/updateFileMetadatum" method="post">
			      <input type="hidden" name="section" value="DIAGNOSTICS"/>
				   <input type="hidden" name="option" value="md5"/>
				   <input type="hidden" name="mode" value="update"/>
			      <div tal:condition="md5">
			        <input type="submit" value="update" >
			      </div>
			      <div tal:condition="not:md5">
			        <input type="submit" value="set" >
			      </div>    
		      </form>
		      </td>
		      </tr>
		      </table>
			</fieldset>	
			<fieldset>	
				<legend>ARCHIVEINFO:</legend>
				<b>numUnpackedFiles = </b><span tal:content="numUnpackedFiles">
					numUnpackedFiles
				</span>
				<br>
				<b>sizezUnpackedFiles = </b><span tal:content="sizezUnpackedFiles">
					sizezUnpackedFiles
				</span>
				<br>
			</fieldset>	
	</div>
	
	</body>
	</html>
