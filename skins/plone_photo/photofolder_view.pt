<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US"
      lang="en-US"
      metal:use-macro="here/main_template/macros/master">
  
  <body>
    
    <div metal:fill-slot="main">

      <div id="overDiv" style="position:absolute; visibility:hidden; z-index:1000;"></div>
      <script type="text/javascript" language="JavaScript" tal:attributes="src here/overlib.js/absolute_url"><!-- overLIB (c) Erik Bosrup --></script>
      
      <script type="text/javascript" language="javascript">
        <!--
        var newWin;
	
        function centeredWindow(url, winname, w, h) {
	windowLeft = (screen.width - w)/2;
	windowTop = (screen.height - h)/2;
	settings = '"toolbar=no,directories=no,menubar=no,scrollbars=no,resizable=no,status=no,width='+w+',height='+h+',left='+windowLeft+',top='+windowTop+'"';
	closeWindow();
	newWin = window.open(url, winname, settings);
	newWin.focus();
        }
	
        function closeWindow() {
	if (newWin && !newWin.closed) {
	newWin.close();
	}
        }
	-->
      </script>
      
      
      <div metal:define-macro="photos"
	   tal:define="photos python:here.contentValues(spec='Portal Photo');
	               start request/start|python:0;
	               batch python:modules['ZTUtils'].Batch(photos, size=1, start=start);
	               previous python:batch.previous;
	               next python:batch.next">
	
        <p>Photo <span tal:replace="batch/start">10</span> of <span tal:replace="python:len(photos)">17</span>.</p>
	
	<div tal:repeat="image batch">
	  
	  <div class="contentHeader">
	    <h1 tal:content="image/title_or_id">Title or id</h1>
	  </div>
	  
	  <a href="#" tal:attributes="onclick string:javascript:centeredWindow('${image/absolute_url}', 'Image', ${image/width}+50, ${image/height}+50);; return false;;">
	    <img tal:condition="image/size" src="#" 
	      tal:attributes="src python:image.absolute_url()+'/'+request.get('display', '')"/>
	  </a>
	  
	      
	  <span class="description" tal:content="structure image/Description">
	    Description
	  </span>
	  
	  <small>
	    
	    <a tal:attributes="href string:${image/absolute_url}/photo_view" target="_new">Edit image</a><br/>&nbsp;<br/>
		
		<span i18n:translate="">Size:</span>
		<span tal:define="size python:image.getObjSize(image)" tal:content="size">                        
		  File size
		</span>            
		
		<span tal:condition="python:test(image.size, 0, 1)" i18n:translate="">
		  (No file has been uploaded)
		</span>
		
		-
		
		<span i18n:translate="">Content type:</span>
		<span tal:content="image/content_type">Content type</span>
	      
	  </small>
	  
	</div>
	
	<div class="listingBar">
	  <table width="100%">
	    <tr>
	      <td>
		<span class="previous" tal:condition="previous">
		  <a onmouseout="return nd();"
		     tal:define="photo python:previous[0]"
		    tal:attributes="href string:${request/URL0}?start:int=${previous/first};
		    onmouseover string:return overlib('', BACKGROUND, '${photo/absolute_url}/thumbnail', HEIGHT, '${photo/height}', WIDTH, '${photo/width}', ABOVE);;">&laquo; previous
		  </a>
		</span>
	      </td>
	      <td>
		<span class="next" tal:condition="next">
		  <a onmouseout="return nd();"
		     tal:define="photo python:next[0]"
		    tal:attributes="href string:${request/URL0}?start:int=${next/first};
		    onmouseover string:return overlib('', BACKGROUND, '${photo/absolute_url}/thumbnail', HEIGHT, '${photo/height}', WIDTH, '${photo/width}', ABOVE);;">next &raquo;
		  </a>
		</span>
	      </td>
	    </tr>
	  </table>
	</div>
	
      </div>
    </div>
    
  </body>
</html>
