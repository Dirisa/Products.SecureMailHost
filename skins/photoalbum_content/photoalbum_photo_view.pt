<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US"
      lang="en-US"
      metal:use-macro="here/main_template/macros/master"
      i18n:domain="cmfphotoalbum">

  <body>
  
    <metal:block fill-slot="base">
      <tal:block tal:define="dummy python:request.set('disable_border', 1)"
	                     tal:replace="nothing">
        Disable the tabs
      </tal:block>    
    </metal:block>
  
    <div metal:fill-slot="main"
         tal:define="DateTime python:modules['DateTime'].DateTime;
                     images python:here.contentValues(spec='Photo');
                     Batch python:modules['Products.CMFPlone'].Batch;
                     b_start python:request.get('b_start', 0);
                     batch python:Batch(images, 1, int(b_start), orphan=0);
                     image python:batch[0];
                     photo_display python:request.cookies.get('photo_display', 'medium');
                     Iterator python:modules['Products.CMFPlone'].IndexIterator;
                     tabindex python:Iterator()">

      <div class="contentHeader">
        <h1 tal:content="image/title_or_id">Title or id</h1>
      </div>
      
      <div metal:use-macro="here/batch_macros/macros/navigation"></div>

      <tal:block tal:define="raw_date python:image.getEXIF().get('EXIF DateTimeOriginal')">
	<div style="position: relative; top: 1.6em; left: 0.3em; color: white; background: black; width:0%; white-space: nowrap; padding: 1px;"
	     tal:condition="raw_date"
             tal:content="python:here.toPortalTime(DateTime(raw_date), long_format=1)">
	</div>
      </tal:block>
	
      <a tal:condition="image/size" tal:attributes="href string:${image/absolute_url}/view">
	<img src="#" tal:replace="structure python:image.tag(size=photo_display)" />
      </a>
	
      <p style="margin-top: 2em;" tal:content="structure image/Description">
	Description
      </p>
            
      <div metal:use-macro="here/photo_macros/macros/size"/>
      
    </div>

    <metal:block fill-slot="documentActions" tal:define="b_start python:request.get('b_start', 0)">
      <a href="" tal:attributes="href string:${request/URL1}/view?b_start=$b_start">
        <img tal:attributes="src string:$portal_url/folder_icon.gif" i18n:attributes="alt title" alt="Back to album" title="Back to album" />
      </a>
    </metal:block>

    
  </body>
  
</html>

